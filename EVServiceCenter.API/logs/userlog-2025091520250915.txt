2025-09-15 07:06:32.733 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 07:06:33.022 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 07:06:33.023 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 07:06:33.063 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 07:06:33.064 +07:00 [INF] Hosting environment: Development
2025-09-15 07:06:33.064 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 07:06:34.413 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 07:06:34.701 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 292.4163ms
2025-09-15 07:06:34.705 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 07:06:38.072 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger - null null
2025-09-15 07:06:38.078 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger - 301 0 null 6.8467ms
2025-09-15 07:06:38.088 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/index.html - null null
2025-09-15 07:06:38.189 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/index.html - 200 null text/html;charset=utf-8 100.6877ms
2025-09-15 07:06:38.228 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/swagger-ui.css - null null
2025-09-15 07:06:38.229 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/index.css - null null
2025-09-15 07:06:38.231 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/swagger-ui-bundle.js - null null
2025-09-15 07:06:38.232 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/swagger-ui-standalone-preset.js - null null
2025-09-15 07:06:38.245 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 07:06:38.274 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/index.js - null null
2025-09-15 07:06:38.326 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 07:06:38.326 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/index.js - 200 null application/javascript;charset=utf-8 80.9384ms
2025-09-15 07:06:38.370 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 124.5299ms
2025-09-15 07:06:38.372 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/index.css - 200 152 text/css 142.9795ms
2025-09-15 07:06:38.376 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/swagger-ui-standalone-preset.js - 200 70860 text/javascript 144.4785ms
2025-09-15 07:06:38.376 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/swagger-ui.css - 200 23647 text/css 148.0162ms
2025-09-15 07:06:38.381 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/swagger-ui-bundle.js - 200 417980 text/javascript 150.3699ms
2025-09-15 07:06:38.414 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 88.4869ms
2025-09-15 07:06:38.577 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 07:06:38.772 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.1774ms
2025-09-15 07:06:43.074 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/api/User - null null
2025-09-15 07:06:43.085 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 07:06:43.090 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 07:06:43.090 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/api/User - 401 0 null 16.586ms
2025-09-15 07:08:06.585 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 55
2025-09-15 07:08:06.608 +07:00 [INF] CORS policy execution failed.
2025-09-15 07:08:06.609 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 07:08:06.637 +07:00 [INF] Executing endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 07:08:06.712 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.DTOs.Request.LoginRequestDto) on controller UserController (EVServiceCenter.API).
2025-09-15 07:08:12.339 +07:00 [INF] Executed DbCommand (171ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 07:08:13.373 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2025-09-15 07:08:13.389 +07:00 [WRN] Login failed: Invalid password for admin01
2025-09-15 07:08:13.841 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 07:08:13.848 +07:00 [INF] Executed action UserController.Login (EVServiceCenter.API) in 7131.4569ms
2025-09-15 07:08:13.849 +07:00 [INF] Executed endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 07:08:13.858 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 400 null application/json; charset=utf-8 7272.8101ms
2025-09-15 07:10:08.629 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 07:10:08.660 +07:00 [INF] CORS policy execution failed.
2025-09-15 07:10:08.660 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 07:10:08.665 +07:00 [INF] Executing endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 07:10:08.666 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.DTOs.Request.LoginRequestDto) on controller UserController (EVServiceCenter.API).
2025-09-15 07:10:08.761 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 07:10:09.047 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 07:10:09.098 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 07:10:09.099 +07:00 [INF] User logged in: admin01
2025-09-15 07:10:09.143 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[EVServiceCenter.Core.DTOs.Response.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 07:10:09.147 +07:00 [INF] Executed action UserController.Login (EVServiceCenter.API) in 480.7163ms
2025-09-15 07:10:09.147 +07:00 [INF] Executed endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 07:10:09.147 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 517.9097ms
2025-09-15 07:10:54.922 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User - null null
2025-09-15 07:10:54.965 +07:00 [INF] Executing endpoint 'UserController.GetAllUsers (EVServiceCenter.API)'
2025-09-15 07:10:54.969 +07:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers() on controller UserController (EVServiceCenter.API).
2025-09-15 07:10:55.004 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username]
FROM [Users] AS [u]
2025-09-15 07:10:55.017 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[EVServiceCenter.Core.DTOs.Response.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 07:10:55.021 +07:00 [INF] Executed action UserController.GetAllUsers (EVServiceCenter.API) in 51.5027ms
2025-09-15 07:10:55.021 +07:00 [INF] Executed endpoint 'UserController.GetAllUsers (EVServiceCenter.API)'
2025-09-15 07:10:55.022 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User - 200 null application/json; charset=utf-8 99.6216ms
2025-09-15 07:11:06.564 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/api/User/1 - null null
2025-09-15 07:11:06.602 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 07:11:06.602 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 07:11:06.602 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/api/User/1 - 401 0 null 38.0866ms
2025-09-15 07:11:20.392 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User/1 - null null
2025-09-15 07:11:20.393 +07:00 [INF] Executing endpoint 'UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 07:11:20.405 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller UserController (EVServiceCenter.API).
2025-09-15 07:11:20.417 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 07:11:20.418 +07:00 [INF] Executing OkObjectResult, writing value of type 'EVServiceCenter.Core.DTOs.Response.UserResponseDto'.
2025-09-15 07:11:20.419 +07:00 [INF] Executed action UserController.GetUserById (EVServiceCenter.API) in 13.8878ms
2025-09-15 07:11:20.419 +07:00 [INF] Executed endpoint 'UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 07:11:20.419 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User/1 - 200 null application/json; charset=utf-8 26.9525ms
2025-09-15 07:11:24.373 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User/2 - null null
2025-09-15 07:11:24.374 +07:00 [INF] Executing endpoint 'UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 07:11:24.374 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller UserController (EVServiceCenter.API).
2025-09-15 07:11:24.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 07:11:24.376 +07:00 [INF] Executing OkObjectResult, writing value of type 'EVServiceCenter.Core.DTOs.Response.UserResponseDto'.
2025-09-15 07:11:24.376 +07:00 [INF] Executed action UserController.GetUserById (EVServiceCenter.API) in 2.5872ms
2025-09-15 07:11:24.376 +07:00 [INF] Executed endpoint 'UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 07:11:24.376 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User/2 - 200 null application/json; charset=utf-8 4.0017ms
2025-09-15 07:11:30.360 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User/2 - null null
2025-09-15 07:11:30.364 +07:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-15 07:11:30.369 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-15 07:11:30.370 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 07:11:30.370 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 07:11:30.371 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User/2 - 401 0 null 10.7482ms
2025-09-15 07:11:34.732 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User/2 - null null
2025-09-15 07:11:34.732 +07:00 [INF] Executing endpoint 'UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 07:11:34.733 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller UserController (EVServiceCenter.API).
2025-09-15 07:11:34.734 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 07:11:34.735 +07:00 [INF] Executing OkObjectResult, writing value of type 'EVServiceCenter.Core.DTOs.Response.UserResponseDto'.
2025-09-15 07:11:34.735 +07:00 [INF] Executed action UserController.GetUserById (EVServiceCenter.API) in 2.441ms
2025-09-15 07:11:34.735 +07:00 [INF] Executed endpoint 'UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 07:11:34.735 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User/2 - 200 null application/json; charset=utf-8 3.2315ms
2025-09-15 07:11:49.357 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User - null null
2025-09-15 07:11:49.358 +07:00 [INF] Executing endpoint 'UserController.GetAllUsers (EVServiceCenter.API)'
2025-09-15 07:11:49.358 +07:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers() on controller UserController (EVServiceCenter.API).
2025-09-15 07:11:49.361 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username]
FROM [Users] AS [u]
2025-09-15 07:11:49.362 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[EVServiceCenter.Core.DTOs.Response.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 07:11:49.362 +07:00 [INF] Executed action UserController.GetAllUsers (EVServiceCenter.API) in 4.7157ms
2025-09-15 07:11:49.363 +07:00 [INF] Executed endpoint 'UserController.GetAllUsers (EVServiceCenter.API)'
2025-09-15 07:11:49.363 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User - 200 null application/json; charset=utf-8 5.5065ms
2025-09-15 14:58:13.198 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 14:58:13.572 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 14:58:13.573 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 14:58:13.612 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 14:58:13.612 +07:00 [INF] Hosting environment: Development
2025-09-15 14:58:13.612 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 14:58:14.661 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 14:58:14.970 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 321.7936ms
2025-09-15 14:58:14.973 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 14:58:18.078 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 14:58:18.078 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 14:58:18.123 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 45.2153ms
2025-09-15 14:58:18.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 88.6511ms
2025-09-15 14:58:18.314 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 14:58:18.420 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 106.4956ms
2025-09-15 15:00:01.252 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 15:00:01.328 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:00:01.329 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:00:01.393 +07:00 [INF] Executing endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 15:00:01.413 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller UserController (EVServiceCenter.API).
2025-09-15 15:00:04.627 +07:00 [INF] Executed DbCommand (156ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 15:00:05.222 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 15:00:05.458 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 15:00:05.468 +07:00 [INF] User logged in: admin01
2025-09-15 15:00:05.529 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:00:05.547 +07:00 [INF] Executed action UserController.Login (EVServiceCenter.API) in 4127.1929ms
2025-09-15 15:00:05.548 +07:00 [INF] Executed endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 15:00:05.561 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 4308.8643ms
2025-09-15 15:16:30.700 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 15:16:31.039 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 15:16:31.040 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 15:16:31.092 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 15:16:31.093 +07:00 [INF] Hosting environment: Development
2025-09-15 15:16:31.093 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 15:16:31.557 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 15:16:31.763 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 210.8819ms
2025-09-15 15:16:31.764 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 15:16:35.256 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 15:16:35.256 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 15:16:35.330 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 73.5442ms
2025-09-15 15:16:35.380 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 123.8569ms
2025-09-15 15:16:35.470 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 15:16:35.773 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 302.6768ms
2025-09-15 15:16:59.633 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 15:16:59.651 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:16:59.652 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:16:59.684 +07:00 [INF] Executing endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 15:16:59.731 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller UserController (EVServiceCenter.API).
2025-09-15 15:17:03.718 +07:00 [INF] Executed action UserController.Login (EVServiceCenter.API) in 3981.6651ms
2025-09-15 15:17:03.720 +07:00 [INF] Executed endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 15:17:03.722 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'EVServiceCenter.Infrastructure.Domains.Identity.Services.TokenService' while attempting to activate 'UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 15:17:03.759 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 500 null text/plain; charset=utf-8 4125.833ms
2025-09-15 15:20:27.384 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 15:20:27.704 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 15:20:27.705 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 15:20:27.745 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 15:20:27.745 +07:00 [INF] Hosting environment: Development
2025-09-15 15:20:27.745 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 15:20:28.357 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 15:20:28.564 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 213.8152ms
2025-09-15 15:20:28.566 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 15:20:30.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 15:20:30.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 15:20:30.911 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 30.8583ms
2025-09-15 15:20:30.934 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.1295ms
2025-09-15 15:20:31.032 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 15:20:31.143 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 111.5769ms
2025-09-15 15:20:43.067 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 15:20:43.081 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:20:43.082 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:20:43.091 +07:00 [INF] Executing endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 15:20:43.126 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller UserController (EVServiceCenter.API).
2025-09-15 15:20:49.295 +07:00 [INF] Executed DbCommand (115ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 15:20:50.016 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 15:20:50.372 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 15:20:50.395 +07:00 [INF] User logged in: admin01
2025-09-15 15:20:50.463 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:20:50.490 +07:00 [INF] Executed action UserController.Login (EVServiceCenter.API) in 7352.9851ms
2025-09-15 15:20:50.491 +07:00 [INF] Executed endpoint 'UserController.Login (EVServiceCenter.API)'
2025-09-15 15:20:50.506 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 7439.3431ms
2025-09-15 15:21:16.078 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User - null null
2025-09-15 15:21:16.153 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/15/2025 1:10:09 AM', Current time (UTC): '9/15/2025 8:21:16 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-15 15:21:16.173 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/15/2025 1:10:09 AM', Current time (UTC): '9/15/2025 8:21:16 AM'.
2025-09-15 15:21:16.182 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 15:21:16.195 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:21:16.200 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User - 401 0 null 122.4401ms
2025-09-15 15:21:21.412 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/User - null null
2025-09-15 15:21:21.431 +07:00 [INF] Executing endpoint 'UserController.GetAllUsers (EVServiceCenter.API)'
2025-09-15 15:21:21.438 +07:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers() on controller UserController (EVServiceCenter.API).
2025-09-15 15:21:21.592 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username]
FROM [Users] AS [u]
2025-09-15 15:21:21.623 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 15:21:21.628 +07:00 [INF] Executed action UserController.GetAllUsers (EVServiceCenter.API) in 189.3963ms
2025-09-15 15:21:21.628 +07:00 [INF] Executed endpoint 'UserController.GetAllUsers (EVServiceCenter.API)'
2025-09-15 15:21:21.629 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/User - 200 null application/json; charset=utf-8 217.2751ms
2025-09-15 15:35:42.893 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 15:35:43.403 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 15:35:43.403 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 15:35:43.518 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 15:35:43.519 +07:00 [INF] Hosting environment: Development
2025-09-15 15:35:43.519 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 15:35:43.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 15:35:43.995 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 202.4223ms
2025-09-15 15:35:43.997 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 15:35:46.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 15:35:46.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 15:35:46.310 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 28.6924ms
2025-09-15 15:35:46.327 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.9201ms
2025-09-15 15:35:46.433 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 15:35:46.531 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.8759ms
2025-09-15 15:35:52.774 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/logout - null 0
2025-09-15 15:35:52.780 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:35:52.780 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:35:52.792 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 15:35:52.802 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:35:52.803 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/logout - 401 0 null 29.6119ms
2025-09-15 15:39:15.966 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 15:39:15.980 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:39:15.980 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:39:15.983 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:39:16.018 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:39:19.145 +07:00 [INF] Executed DbCommand (128ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 15:39:19.706 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 15:39:19.911 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 15:39:19.921 +07:00 [INF] User logged in: admin01
2025-09-15 15:39:19.974 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:39:19.987 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 3966.2531ms
2025-09-15 15:39:19.987 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:39:19.994 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 4027.7003ms
2025-09-15 15:39:55.842 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/logout - null 0
2025-09-15 15:39:55.880 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:39:55.880 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:39:55.882 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 15:39:55.882 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:39:55.883 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/logout - 401 0 null 41.5007ms
2025-09-15 15:41:39.150 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 15:41:39.151 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:41:39.175 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:41:39.176 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:41:39.179 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:41:39.248 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 15:41:39.475 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 15:41:39.496 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 15:41:39.497 +07:00 [INF] User logged in: admin01
2025-09-15 15:41:39.503 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:41:39.503 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 324.048ms
2025-09-15 15:41:39.504 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:41:39.504 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 354.2554ms
2025-09-15 15:42:16.956 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/register - application/json 172
2025-09-15 15:42:17.014 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:42:17.014 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:42:17.015 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:42:17.020 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:42:17.106 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:42:17.125 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:42:17.359 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 100), @p6='?' (DbType = Date), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Date), @p10='?' (Size = 64) (DbType = Binary), @p11='?' (Size = 32) (DbType = Binary), @p12='?' (Size = 20), @p13='?' (Size = 500), @p14='?' (Size = 8000) (DbType = Binary), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p18='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Department], [Email], [EmployeeCode], [FullName], [HireDate], [IsActive], [LastLoginDate], [PasswordExpiryDate], [PasswordHash], [PasswordSalt], [PhoneNumber], [ProfilePicture], [ResetToken], [ResetTokenExpiry], [RoleID], [Salary], [Username])
OUTPUT INSERTED.[UserID], INSERTED.[FailedLoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-15 15:42:17.377 +07:00 [INF] User registered: customer_test
2025-09-15 15:42:17.379 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:42:17.397 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 377.5213ms
2025-09-15 15:42:17.397 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:42:17.398 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/register - 201 null application/json; charset=utf-8 442.0248ms
2025-09-15 15:46:26.678 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 15:46:26.678 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:46:26.678 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:46:26.679 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:46:26.679 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:46:26.738 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 15:46:26.893 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 15:46:26.909 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 15:46:26.910 +07:00 [INF] User logged in: admin01
2025-09-15 15:46:26.910 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:46:26.910 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 231.0607ms
2025-09-15 15:46:26.910 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:46:26.911 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 267.3102ms
2025-09-15 15:46:32.438 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 55
2025-09-15 15:46:32.438 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:46:32.438 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:46:32.438 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:46:32.438 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:46:32.440 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 15:46:32.441 +07:00 [WRN] Login failed: Username admi01 not found
2025-09-15 15:46:32.441 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:46:32.444 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 5.8865ms
2025-09-15 15:46:32.444 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:46:32.444 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 401 null application/json; charset=utf-8 6.6329ms
2025-09-15 15:46:43.639 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/api/User - null null
2025-09-15 15:46:43.640 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 15:46:43.640 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:46:43.641 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/api/User - 401 0 null 1.5168ms
2025-09-15 15:49:25.875 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/register - application/json 179
2025-09-15 15:49:25.875 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 15:49:25.876 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:49:25.877 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/register - 401 0 null 2.4225ms
2025-09-15 15:49:36.325 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/register - application/json 179
2025-09-15 15:49:36.326 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 15:49:36.326 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:49:36.326 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/register - 401 0 null 0.4904ms
2025-09-15 15:50:18.770 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/register - application/json 179
2025-09-15 15:50:18.771 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 15:50:18.771 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:50:18.771 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/register - 401 0 null 1.3069ms
2025-09-15 15:50:26.577 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/register - application/json 172
2025-09-15 15:50:26.578 +07:00 [INF] CORS policy execution failed.
2025-09-15 15:50:26.578 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 15:50:26.578 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:50:26.578 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:50:26.654 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:50:26.927 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:50:26.927 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 348.9683ms
2025-09-15 15:50:26.928 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:50:26.928 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/register - 500 null application/json; charset=utf-8 350.7291ms
2025-09-15 15:50:47.884 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 179
2025-09-15 15:50:47.885 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:50:47.885 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:50:47.893 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:50:47.963 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:50:47.964 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 78.6233ms
2025-09-15 15:50:47.964 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:50:47.964 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 500 null application/json; charset=utf-8 79.7384ms
2025-09-15 15:50:57.913 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 181
2025-09-15 15:50:57.913 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:50:57.913 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:50:57.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:50:57.921 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:50:57.981 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:50:57.982 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 68.405ms
2025-09-15 15:50:57.982 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:50:57.982 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 500 null application/json; charset=utf-8 69.8179ms
2025-09-15 15:51:02.241 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 182
2025-09-15 15:51:02.241 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:51:02.242 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:51:02.245 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:51:02.246 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:51:02.429 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 100), @p6='?' (DbType = Date), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Date), @p10='?' (Size = 64) (DbType = Binary), @p11='?' (Size = 32) (DbType = Binary), @p12='?' (Size = 20), @p13='?' (Size = 500), @p14='?' (Size = 8000) (DbType = Binary), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p18='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Department], [Email], [EmployeeCode], [FullName], [HireDate], [IsActive], [LastLoginDate], [PasswordExpiryDate], [PasswordHash], [PasswordSalt], [PhoneNumber], [ProfilePicture], [ResetToken], [ResetTokenExpiry], [RoleID], [Salary], [Username])
OUTPUT INSERTED.[UserID], INSERTED.[FailedLoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-15 15:51:02.429 +07:00 [INF] User registered: customer_test!
2025-09-15 15:51:02.430 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:51:02.430 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 188.6808ms
2025-09-15 15:51:02.430 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:51:02.430 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 201 null application/json; charset=utf-8 189.5116ms
2025-09-15 15:57:42.696 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 182
2025-09-15 15:57:42.696 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:57:42.697 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:57:42.776 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:57:42.881 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:57:42.881 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 184.8437ms
2025-09-15 15:57:42.881 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:57:42.882 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 500 null application/json; charset=utf-8 185.7386ms
2025-09-15 15:57:54.353 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 184
2025-09-15 15:57:54.353 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:57:54.354 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:57:54.356 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:57:54.360 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:57:54.470 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:57:54.471 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 117.3366ms
2025-09-15 15:57:54.471 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:57:54.471 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 500 null application/json; charset=utf-8 118.1127ms
2025-09-15 15:58:00.361 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 184
2025-09-15 15:58:00.361 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:58:00.361 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:58:00.385 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:58:00.389 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 15:58:00.559 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 100), @p6='?' (DbType = Date), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Date), @p10='?' (Size = 64) (DbType = Binary), @p11='?' (Size = 32) (DbType = Binary), @p12='?' (Size = 20), @p13='?' (Size = 500), @p14='?' (Size = 8000) (DbType = Binary), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p18='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Department], [Email], [EmployeeCode], [FullName], [HireDate], [IsActive], [LastLoginDate], [PasswordExpiryDate], [PasswordHash], [PasswordSalt], [PhoneNumber], [ProfilePicture], [ResetToken], [ResetTokenExpiry], [RoleID], [Salary], [Username])
OUTPUT INSERTED.[UserID], INSERTED.[FailedLoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-15 15:58:00.559 +07:00 [INF] User registered: customer_test123
2025-09-15 15:58:00.560 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:58:00.560 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 198.6975ms
2025-09-15 15:58:00.560 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 15:58:00.560 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 201 null application/json; charset=utf-8 199.8063ms
2025-09-15 15:58:51.483 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/login - application/json 66
2025-09-15 15:58:51.486 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 15:58:51.486 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 15:58:51.486 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/login - 401 0 null 41.5681ms
2025-09-15 15:58:59.406 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/login - application/json 66
2025-09-15 15:58:59.407 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:58:59.407 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 15:58:59.419 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 15:58:59.580 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 15:58:59.599 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 15:58:59.600 +07:00 [INF] User logged in: customer_test
2025-09-15 15:58:59.603 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 15:58:59.605 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 197.3569ms
2025-09-15 15:58:59.605 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 15:58:59.605 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/login - 200 null application/json; charset=utf-8 198.9472ms
2025-09-15 16:00:16.536 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/profile? - null null
2025-09-15 16:00:16.581 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API)'
2025-09-15 16:00:16.584 +07:00 [INF] Route matched with {action = "GetProfile", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:00:16.604 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:00:16.605 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:00:16.606 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API) in 21.9274ms
2025-09-15 16:00:16.606 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API)'
2025-09-15 16:00:16.606 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/profile? - 200 null application/json; charset=utf-8 69.4657ms
2025-09-15 16:01:08.412 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/login - application/json 60
2025-09-15 16:01:08.412 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:01:08.412 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:01:08.423 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:01:08.596 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2025-09-15 16:01:08.596 +07:00 [WRN] Login failed: Invalid password for admin01
2025-09-15 16:01:08.764 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:01:08.764 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 351.7024ms
2025-09-15 16:01:08.764 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:01:08.764 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/login - 500 null application/json; charset=utf-8 352.5666ms
2025-09-15 16:01:38.797 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/login - application/json 61
2025-09-15 16:01:38.827 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:01:38.828 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:01:38.841 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-15 16:01:38.858 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 29.8463ms
2025-09-15 16:01:38.858 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:01:38.858 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/login - 400 null application/problem+json; charset=utf-8 87.9504ms
2025-09-15 16:01:43.837 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/login - application/json 60
2025-09-15 16:01:43.837 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:01:43.837 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:01:43.860 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:01:44.028 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:01:44.048 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 16:01:44.048 +07:00 [INF] User logged in: admin01
2025-09-15 16:01:44.049 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:01:44.049 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 211.7242ms
2025-09-15 16:01:44.049 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:01:44.049 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/login - 200 null application/json; charset=utf-8 212.2146ms
2025-09-15 16:02:34.401 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/profile? - null null
2025-09-15 16:02:34.405 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API)'
2025-09-15 16:02:34.405 +07:00 [INF] Route matched with {action = "GetProfile", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:02:34.422 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:02:34.422 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:02:34.423 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API) in 18.0437ms
2025-09-15 16:02:34.423 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API)'
2025-09-15 16:02:34.423 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/profile? - 200 null application/json; charset=utf-8 24.129ms
2025-09-15 16:09:32.736 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1?Authorization=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjgiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW4wMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFkbWluIiwiZXhwIjoxNzU3OTMwNTA0LCJpc3MiOiJFVlNlcnZpY2VDZW50ZXIiLCJhdWQiOiJFVlNlcnZpY2VDZW50ZXItVXNlcnMifQ.0GjN8JDTh-MrYoOMoLUup43lY4Qs9qK4YeYz3cQ7anA - application/json 234
2025-09-15 16:09:32.737 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 16:09:32.737 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 16:09:32.738 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1?Authorization=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjgiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW4wMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFkbWluIiwiZXhwIjoxNzU3OTMwNTA0LCJpc3MiOiJFVlNlcnZpY2VDZW50ZXIiLCJhdWQiOiJFVlNlcnZpY2VDZW50ZXItVXNlcnMifQ.0GjN8JDTh-MrYoOMoLUup43lY4Qs9qK4YeYz3cQ7anA - 401 0 null 0.8398ms
2025-09-15 16:10:06.737 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1?Authorization=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjgiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW4wMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFkbWluIiwiZXhwIjoxNzU3OTMwNTA0LCJpc3MiOiJFVlNlcnZpY2VDZW50ZXIiLCJhdWQiOiJFVlNlcnZpY2VDZW50ZXItVXNlcnMifQ.0GjN8JDTh-MrYoOMoLUup43lY4Qs9qK4YeYz3cQ7anA - application/json 234
2025-09-15 16:10:06.738 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:10:06.745 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.Entities.User) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:10:06.893 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-15 16:10:06.893 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 148.5856ms
2025-09-15 16:10:06.893 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:10:06.893 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1?Authorization=Bearer%20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjgiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW4wMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFkbWluIiwiZXhwIjoxNzU3OTMwNTA0LCJpc3MiOiJFVlNlcnZpY2VDZW50ZXIiLCJhdWQiOiJFVlNlcnZpY2VDZW50ZXItVXNlcnMifQ.0GjN8JDTh-MrYoOMoLUup43lY4Qs9qK4YeYz3cQ7anA - 400 null application/problem+json; charset=utf-8 156.9446ms
2025-09-15 16:11:41.845 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 268
2025-09-15 16:11:41.846 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:11:41.846 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.Entities.User) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:11:41.849 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-15 16:11:41.850 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 3.4693ms
2025-09-15 16:11:41.850 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:11:41.850 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 400 null application/problem+json; charset=utf-8 4.2629ms
2025-09-15 16:14:54.448 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/index.html - null null
2025-09-15 16:14:54.537 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/index.html - 200 null text/html;charset=utf-8 88.745ms
2025-09-15 16:14:54.608 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 16:14:54.609 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 1.1524ms
2025-09-15 16:14:54.611 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 16:14:54.655 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.5029ms
2025-09-15 16:14:54.772 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 16:14:54.782 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/favicon-32x32.png - null null
2025-09-15 16:14:54.797 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/favicon-32x32.png - 200 628 image/png 15.0165ms
2025-09-15 16:14:54.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 78.6434ms
2025-09-15 16:40:07.672 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 16:40:08.045 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 16:40:08.046 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 16:40:08.096 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 16:40:08.096 +07:00 [INF] Hosting environment: Development
2025-09-15 16:40:08.097 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 16:40:08.453 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 16:40:08.635 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 189.8328ms
2025-09-15 16:40:08.638 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 16:40:13.508 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 234
2025-09-15 16:40:13.587 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:13.605 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:40:16.185 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:40:16.398 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:40:16.422 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 16:40:16.830 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:40:16.851 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 3241.2135ms
2025-09-15 16:40:16.851 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:16.858 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 500 null application/json; charset=utf-8 3350.2052ms
2025-09-15 16:40:28.263 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 236
2025-09-15 16:40:28.268 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:28.268 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:40:28.316 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:40:28.319 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:40:28.320 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 16:40:28.484 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 16:40:28.494 +07:00 [INF] User updated: 8 by system
2025-09-15 16:40:28.495 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:40:28.507 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 238.6813ms
2025-09-15 16:40:28.507 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:28.507 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 200 null application/json; charset=utf-8 244.5051ms
2025-09-15 16:40:36.385 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 236
2025-09-15 16:40:36.387 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:36.387 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:40:36.405 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:40:36.406 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 18.4353ms
2025-09-15 16:40:36.406 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:36.406 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 21.0801ms
2025-09-15 16:40:56.313 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 236
2025-09-15 16:40:56.313 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:56.313 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:40:56.345 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:40:56.347 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:40:56.369 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 16:40:56.370 +07:00 [INF] User updated: 8 by system
2025-09-15 16:40:56.370 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:40:56.370 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 56.7107ms
2025-09-15 16:40:56.370 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:40:56.370 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 200 null application/json; charset=utf-8 57.8946ms
2025-09-15 16:41:53.153 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 234
2025-09-15 16:41:53.154 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:41:53.154 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:41:53.180 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:41:53.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:41:53.187 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 16:41:53.310 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:41:53.311 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 156.3938ms
2025-09-15 16:41:53.311 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:41:53.311 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 500 null application/json; charset=utf-8 188.0625ms
2025-09-15 16:42:13.109 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 234
2025-09-15 16:42:13.109 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:42:13.109 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:42:13.140 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:42:13.141 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:42:13.145 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 16:42:13.162 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 16:42:13.163 +07:00 [INF] User updated: 8 by system
2025-09-15 16:42:13.163 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:42:13.163 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 53.6254ms
2025-09-15 16:42:13.163 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:42:13.163 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 200 null application/json; charset=utf-8 54.9244ms
2025-09-15 16:42:22.894 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 234
2025-09-15 16:42:22.894 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:42:22.894 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:42:22.895 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:42:22.895 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 1.0585ms
2025-09-15 16:42:22.895 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:42:22.896 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 1.9362ms
2025-09-15 16:42:31.923 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 234
2025-09-15 16:42:31.924 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:42:31.924 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:42:31.927 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:42:31.928 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:42:31.931 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 16:42:31.932 +07:00 [INF] User updated: 8 by system
2025-09-15 16:42:31.932 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:42:31.932 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 8.2932ms
2025-09-15 16:42:31.932 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:42:31.932 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 200 null application/json; charset=utf-8 9.1485ms
2025-09-15 16:43:52.484 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 198
2025-09-15 16:43:52.485 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 16:43:52.488 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:43:52.554 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 16:43:52.571 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 16:43:52.860 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 100), @p6='?' (DbType = Date), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Date), @p10='?' (Size = 64) (DbType = Binary), @p11='?' (Size = 32) (DbType = Binary), @p12='?' (Size = 20), @p13='?' (Size = 500), @p14='?' (Size = 8000) (DbType = Binary), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p18='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Department], [Email], [EmployeeCode], [FullName], [HireDate], [IsActive], [LastLoginDate], [PasswordExpiryDate], [PasswordHash], [PasswordSalt], [PhoneNumber], [ProfilePicture], [ResetToken], [ResetTokenExpiry], [RoleID], [Salary], [Username])
OUTPUT INSERTED.[UserID], INSERTED.[FailedLoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-15 16:43:52.876 +07:00 [INF] User registered: testcustomer001
2025-09-15 16:43:52.885 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:43:52.902 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 414.1275ms
2025-09-15 16:43:52.902 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 16:43:52.902 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 201 null application/json; charset=utf-8 418.7937ms
2025-09-15 16:44:30.362 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 16:44:30.366 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 16:44:30.405 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 42.5696ms
2025-09-15 16:44:30.426 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.3441ms
2025-09-15 16:44:30.515 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 16:44:30.525 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.3782ms
2025-09-15 16:44:44.513 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 16:44:44.517 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:44:44.517 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:44:44.519 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:44:44.524 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:44:44.577 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:44:44.578 +07:00 [WRN] Login failed: Username admin01 not found
2025-09-15 16:44:44.579 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:44:44.580 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 56.477ms
2025-09-15 16:44:44.581 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:44:44.581 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 401 null application/json; charset=utf-8 67.7542ms
2025-09-15 16:45:09.538 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 16:45:09.539 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:45:09.539 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:45:09.539 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:45:09.539 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:45:09.543 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:45:09.544 +07:00 [WRN] Login failed: Username admin01 not found
2025-09-15 16:45:09.544 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:45:09.544 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 4.6284ms
2025-09-15 16:45:09.544 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:45:09.545 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 401 null application/json; charset=utf-8 6.6283ms
2025-09-15 16:45:21.510 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 56
2025-09-15 16:45:21.511 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:45:21.511 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:45:21.511 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:45:21.511 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:45:21.541 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:45:21.541 +07:00 [WRN] Login failed: Username admin01 not found
2025-09-15 16:45:21.541 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:45:21.541 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 29.9715ms
2025-09-15 16:45:21.541 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:45:21.541 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 401 null application/json; charset=utf-8 31.567ms
2025-09-15 16:45:46.965 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 58
2025-09-15 16:45:47.024 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:45:47.024 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:45:47.024 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:45:47.025 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:45:47.040 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:45:47.294 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2025-09-15 16:45:47.295 +07:00 [WRN] Login failed: Invalid password for PhamNghia
2025-09-15 16:45:47.467 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:45:47.467 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 442.067ms
2025-09-15 16:45:47.467 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:45:47.467 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 500 null application/json; charset=utf-8 501.981ms
2025-09-15 16:46:31.618 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 58
2025-09-15 16:46:31.618 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:46:31.619 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:46:31.619 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:46:31.619 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:46:31.690 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:46:31.856 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:46:31.883 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 16:46:31.884 +07:00 [INF] User logged in: NghiaPham
2025-09-15 16:46:31.889 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:46:31.890 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 270.7705ms
2025-09-15 16:46:31.890 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:46:31.890 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 272.6529ms
2025-09-15 16:47:18.706 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 238
2025-09-15 16:47:18.715 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'kd1x41xpgbarkm6eIaLjkTFa46mWJbCpe1fcgmTsDSU'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-15 16:47:18.716 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'kd1x41xpgbarkm6eIaLjkTFa46mWJbCpe1fcgmTsDSU'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-09-15 16:47:18.717 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 16:47:18.720 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 16:47:18.721 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 401 0 null 14.6799ms
2025-09-15 16:47:24.410 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 238
2025-09-15 16:47:24.411 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:47:24.411 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:47:24.412 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:47:24.412 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 1.0858ms
2025-09-15 16:47:24.412 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:47:24.412 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 1.8422ms
2025-09-15 16:47:39.832 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 238
2025-09-15 16:47:39.833 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:47:39.833 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:47:39.835 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:47:39.835 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 1.442ms
2025-09-15 16:47:39.835 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:47:39.835 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 2.6371ms
2025-09-15 16:47:54.998 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 238
2025-09-15 16:47:55.000 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:47:55.000 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:47:55.001 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:47:55.001 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 1.282ms
2025-09-15 16:47:55.001 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:47:55.001 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 3.4673ms
2025-09-15 16:48:08.276 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 237
2025-09-15 16:48:08.277 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:48:08.277 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:48:08.300 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:48:08.302 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:48:08.306 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 16:48:08.392 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:48:08.392 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 114.9338ms
2025-09-15 16:48:08.392 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:48:08.393 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 500 null application/json; charset=utf-8 117.1307ms
2025-09-15 16:48:14.912 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 237
2025-09-15 16:48:14.913 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:48:14.913 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:48:14.914 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:48:14.914 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 1.1549ms
2025-09-15 16:48:14.914 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:48:14.914 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 2.1657ms
2025-09-15 16:55:54.904 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 16:55:55.201 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 16:55:55.202 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 16:55:55.255 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 16:55:55.256 +07:00 [INF] Hosting environment: Development
2025-09-15 16:55:55.256 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 16:55:55.923 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 16:55:56.127 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 209.4084ms
2025-09-15 16:55:56.129 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 16:55:58.192 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 16:55:58.192 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 16:55:58.259 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 67.6817ms
2025-09-15 16:55:58.302 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 109.9705ms
2025-09-15 16:55:58.382 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 16:55:58.403 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.416ms
2025-09-15 16:56:11.426 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 58
2025-09-15 16:56:11.434 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:56:11.435 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:56:11.442 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:56:11.478 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:56:17.212 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:56:18.123 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2025-09-15 16:56:18.139 +07:00 [WRN] Login failed: Invalid password for PhamNghia
2025-09-15 16:56:18.393 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:56:18.407 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 6924.8926ms
2025-09-15 16:56:18.407 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:56:18.418 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 500 null application/json; charset=utf-8 6992.5202ms
2025-09-15 16:56:37.895 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 58
2025-09-15 16:56:37.898 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:56:37.899 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:56:37.903 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:56:37.904 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:56:38.007 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 16:56:38.749 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 16:56:38.811 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 16:56:38.812 +07:00 [INF] User logged in: NghiaPham
2025-09-15 16:56:38.873 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:56:38.922 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 1017.533ms
2025-09-15 16:56:38.922 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 16:56:38.923 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 1028.0223ms
2025-09-15 16:57:00.024 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 237
2025-09-15 16:57:00.084 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:57:00.093 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:57:00.159 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:57:00.161 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 67.953ms
2025-09-15 16:57:00.161 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:57:00.161 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 137.7771ms
2025-09-15 16:59:38.709 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7077/api/User/1 - application/json 228
2025-09-15 16:59:38.710 +07:00 [INF] CORS policy execution failed.
2025-09-15 16:59:38.710 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 16:59:38.711 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 16:59:38.715 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 16:59:38.715 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7077/api/User/1 - 401 0 null 5.378ms
2025-09-15 16:59:55.794 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/8 - application/json 237
2025-09-15 16:59:55.795 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:59:55.796 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 16:59:55.798 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 16:59:55.798 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 2.3161ms
2025-09-15 16:59:55.798 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 16:59:55.798 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/8 - 400 null application/json; charset=utf-8 4.0631ms
2025-09-15 17:00:31.862 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 237
2025-09-15 17:00:31.863 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:00:31.863 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:00:31.900 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:00:31.904 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:00:31.936 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:00:32.182 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:00:32.183 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 319.1287ms
2025-09-15 17:00:32.183 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:00:32.183 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 500 null application/json; charset=utf-8 320.6068ms
2025-09-15 17:00:36.793 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:00:36.793 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:00:36.794 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:00:36.813 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:00:36.815 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:00:36.822 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:00:36.837 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:00:36.860 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:00:36.861 +07:00 [INF] User updated: 1 by system
2025-09-15 17:00:36.861 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:00:36.863 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 69.8472ms
2025-09-15 17:00:36.864 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:00:36.864 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 71.2253ms
2025-09-15 17:02:18.566 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:02:18.566 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:02:18.567 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:02:18.591 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:02:18.594 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:02:18.632 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__prefix_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[EmployeeCode]
FROM [Users] AS [u]
WHERE [u].[EmployeeCode] IS NOT NULL AND [u].[EmployeeCode] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [u].[EmployeeCode] DESC
2025-09-15 17:02:18.642 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__code_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[EmployeeCode] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:02:18.675 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:02:18.676 +07:00 [INF] User updated: 1 by system
2025-09-15 17:02:18.676 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:02:18.676 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 109.7103ms
2025-09-15 17:02:18.676 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:02:18.677 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 111.0815ms
2025-09-15 17:02:37.645 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:02:37.646 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:02:37.646 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:02:37.648 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:02:37.652 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:02:37.655 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:02:37.655 +07:00 [INF] User updated: 1 by system
2025-09-15 17:02:37.655 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:02:37.656 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 9.4974ms
2025-09-15 17:02:37.656 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:02:37.656 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 10.4474ms
2025-09-15 17:03:02.569 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:03:02.602 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:03:02.602 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:03:02.639 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:03:02.641 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:03:02.644 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__prefix_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[EmployeeCode]
FROM [Users] AS [u]
WHERE [u].[EmployeeCode] IS NOT NULL AND [u].[EmployeeCode] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [u].[EmployeeCode] DESC
2025-09-15 17:03:02.649 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__code_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[EmployeeCode] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:03:02.670 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:03:02.670 +07:00 [INF] User updated: 1 by system
2025-09-15 17:03:02.670 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:03:02.671 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 68.5638ms
2025-09-15 17:03:02.671 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:03:02.671 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 131.4546ms
2025-09-15 17:04:04.948 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:04:04.948 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:04:04.948 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:04:04.976 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:04:04.977 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:04:04.980 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__prefix_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[EmployeeCode]
FROM [Users] AS [u]
WHERE [u].[EmployeeCode] IS NOT NULL AND [u].[EmployeeCode] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [u].[EmployeeCode] DESC
2025-09-15 17:04:04.983 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__code_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[EmployeeCode] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:04:05.005 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:04:05.005 +07:00 [INF] User updated: 1 by system
2025-09-15 17:04:05.005 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:04:05.006 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 57.2925ms
2025-09-15 17:04:05.006 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:04:05.006 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 58.5265ms
2025-09-15 17:04:18.543 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:04:18.543 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:04:18.543 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:04:18.549 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:04:18.551 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:04:18.555 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:04:18.555 +07:00 [INF] User updated: 1 by system
2025-09-15 17:04:18.555 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:04:18.556 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 12.1116ms
2025-09-15 17:04:18.556 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:04:18.556 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 13.2488ms
2025-09-15 17:04:35.537 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:04:35.539 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:04:35.539 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:04:35.542 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:04:35.544 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:04:35.545 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__prefix_0_startswith='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[EmployeeCode]
FROM [Users] AS [u]
WHERE [u].[EmployeeCode] IS NOT NULL AND [u].[EmployeeCode] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [u].[EmployeeCode] DESC
2025-09-15 17:04:35.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__code_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[EmployeeCode] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:04:35.549 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:04:35.549 +07:00 [INF] User updated: 1 by system
2025-09-15 17:04:35.549 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:04:35.550 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 10.7363ms
2025-09-15 17:04:35.550 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:04:35.550 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 12.6298ms
2025-09-15 17:08:08.890 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 17:08:09.206 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 17:08:09.206 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 17:08:09.246 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 17:08:09.246 +07:00 [INF] Hosting environment: Development
2025-09-15 17:08:09.246 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 17:08:09.917 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 17:08:10.213 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 301.584ms
2025-09-15 17:08:10.215 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 17:08:13.370 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 17:08:13.370 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 17:08:13.409 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 39.0868ms
2025-09-15 17:08:13.447 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.5844ms
2025-09-15 17:08:13.526 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 17:08:13.557 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.7904ms
2025-09-15 17:08:30.708 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 58
2025-09-15 17:08:30.715 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:08:30.715 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:08:30.723 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:08:30.782 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:08:36.792 +07:00 [INF] Executed DbCommand (124ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:08:37.551 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:08:37.830 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:08:37.865 +07:00 [INF] User logged in: NghiaPham
2025-09-15 17:08:37.955 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:08:38.031 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 7240.2866ms
2025-09-15 17:08:38.034 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:08:38.054 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 7346.0004ms
2025-09-15 17:09:07.145 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:09:07.246 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:09:07.257 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:09:07.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:09:07.403 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:09:07.411 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:09:07.412 +07:00 [INF] User updated: 1 by system
2025-09-15 17:09:07.413 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:09:07.417 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 160.0572ms
2025-09-15 17:09:07.418 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:09:07.419 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 274.1922ms
2025-09-15 17:09:46.598 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/register - application/json 167
2025-09-15 17:09:46.632 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:09:46.632 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:09:46.635 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:09:46.642 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:09:46.770 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:09:46.774 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 131.9572ms
2025-09-15 17:09:46.774 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:09:46.774 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/register - 403 null application/json; charset=utf-8 177.2282ms
2025-09-15 17:09:55.593 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/register - application/json 167
2025-09-15 17:09:55.593 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:09:55.593 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:09:55.594 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:09:55.595 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:09:55.600 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:09:55.600 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 5.1763ms
2025-09-15 17:09:55.600 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:09:55.600 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/register - 403 null application/json; charset=utf-8 7.6989ms
2025-09-15 17:10:00.693 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/register - application/json 167
2025-09-15 17:10:00.693 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:10:00.693 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:10:00.694 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:10:00.694 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:10:00.696 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:10:00.697 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 2.9238ms
2025-09-15 17:10:00.697 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:10:00.697 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/register - 403 null application/json; charset=utf-8 3.8678ms
2025-09-15 17:10:06.425 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/register - application/json 167
2025-09-15 17:10:06.426 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:10:06.426 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:10:06.426 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:10:06.426 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:10:06.530 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:10:06.560 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:10:07.274 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 100), @p6='?' (DbType = Date), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Date), @p10='?' (Size = 64) (DbType = Binary), @p11='?' (Size = 32) (DbType = Binary), @p12='?' (Size = 20), @p13='?' (Size = 500), @p14='?' (Size = 8000) (DbType = Binary), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p18='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Department], [Email], [EmployeeCode], [FullName], [HireDate], [IsActive], [LastLoginDate], [PasswordExpiryDate], [PasswordHash], [PasswordSalt], [PhoneNumber], [ProfilePicture], [ResetToken], [ResetTokenExpiry], [RoleID], [Salary], [Username])
OUTPUT INSERTED.[UserID], INSERTED.[FailedLoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-15 17:10:07.321 +07:00 [INF] User registered: 0848022439
2025-09-15 17:10:07.325 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:10:07.368 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 939.932ms
2025-09-15 17:10:07.368 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:10:07.369 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/register - 201 null application/json; charset=utf-8 943.3893ms
2025-09-15 17:10:32.908 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 240
2025-09-15 17:10:32.910 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:10:32.911 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:10:32.912 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:10:32.913 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 2.2202ms
2025-09-15 17:10:32.913 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:10:32.913 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 403 null application/json; charset=utf-8 4.765ms
2025-09-15 17:11:21.486 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/1 - application/json 234
2025-09-15 17:11:21.487 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:21.487 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:11:21.490 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:11:21.491 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 3.6507ms
2025-09-15 17:11:21.491 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:21.491 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/1 - 400 null application/json; charset=utf-8 5.3867ms
2025-09-15 17:11:25.369 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 234
2025-09-15 17:11:25.371 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:25.371 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:11:25.374 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:11:25.374 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 2.8702ms
2025-09-15 17:11:25.374 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:25.374 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 403 null application/json; charset=utf-8 4.5835ms
2025-09-15 17:11:32.954 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 234
2025-09-15 17:11:32.955 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:32.955 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:11:32.957 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:11:32.958 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 2.4155ms
2025-09-15 17:11:32.958 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:32.958 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 403 null application/json; charset=utf-8 3.7799ms
2025-09-15 17:11:36.598 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 234
2025-09-15 17:11:36.598 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:36.598 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:11:36.599 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:11:36.600 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 1.163ms
2025-09-15 17:11:36.600 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:36.600 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 403 null application/json; charset=utf-8 2.1389ms
2025-09-15 17:11:43.804 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 219
2025-09-15 17:11:43.805 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:43.806 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:11:43.819 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-15 17:11:43.843 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 37.1271ms
2025-09-15 17:11:43.843 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:43.843 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 400 null application/problem+json; charset=utf-8 39.3334ms
2025-09-15 17:11:49.027 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 234
2025-09-15 17:11:49.028 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:49.028 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:11:49.029 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:11:49.029 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 1.3434ms
2025-09-15 17:11:49.029 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:11:49.030 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 403 null application/json; charset=utf-8 2.6074ms
2025-09-15 17:12:30.670 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 234
2025-09-15 17:12:30.703 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:12:30.703 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:12:30.705 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:12:30.706 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 2.4516ms
2025-09-15 17:12:30.706 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:12:30.706 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 403 null application/json; charset=utf-8 62.1333ms
2025-09-15 17:13:36.571 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 218
2025-09-15 17:13:36.571 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:13:36.571 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:13:36.577 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:13:36.579 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:13:36.591 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:13:36.594 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:13:36.822 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:13:36.822 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 250.5834ms
2025-09-15 17:13:36.822 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:13:36.822 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 500 null application/json; charset=utf-8 251.7695ms
2025-09-15 17:13:53.978 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 216
2025-09-15 17:13:53.978 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:13:53.978 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:13:53.982 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:13:53.983 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:13:53.994 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:13:53.998 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:13:54.016 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:13:54.016 +07:00 [INF] User updated: 13 by system
2025-09-15 17:13:54.016 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:13:54.016 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 37.8243ms
2025-09-15 17:13:54.016 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:13:54.017 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 200 null application/json; charset=utf-8 38.9055ms
2025-09-15 17:17:34.791 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 58
2025-09-15 17:17:34.792 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:17:34.796 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:17:34.834 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:17:34.834 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:17:34.884 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:17:35.175 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:17:35.225 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:17:35.226 +07:00 [INF] User logged in: NghiaPham
2025-09-15 17:17:35.227 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:17:35.227 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 392.869ms
2025-09-15 17:17:35.227 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:17:35.228 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 436.574ms
2025-09-15 17:18:33.412 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/change-password - application/json 117
2025-09-15 17:18:33.413 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:18:33.422 +07:00 [INF] Route matched with {action = "ChangePassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.ChangePasswordRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:18:33.428 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-15 17:18:33.428 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API) in 6.5859ms
2025-09-15 17:18:33.428 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:18:33.428 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/change-password - 400 null application/problem+json; charset=utf-8 16.2553ms
2025-09-15 17:18:39.982 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/change-password - application/json 116
2025-09-15 17:18:39.983 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:18:39.983 +07:00 [INF] Route matched with {action = "ChangePassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.ChangePasswordRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:18:40.150 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:18:40.181 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:18:40.181 +07:00 [INF] Password updated for UserId 8
2025-09-15 17:18:40.182 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:18:40.184 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API) in 201.4304ms
2025-09-15 17:18:40.185 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:18:40.185 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/change-password - 200 null application/json; charset=utf-8 202.4135ms
2025-09-15 17:19:17.610 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 58
2025-09-15 17:19:17.610 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:19:17.611 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:19:17.611 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:19:17.611 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:19:17.673 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:19:17.953 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2025-09-15 17:19:17.954 +07:00 [WRN] Login failed: Invalid password for NghiaPham
2025-09-15 17:19:18.100 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:19:18.101 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 489.4952ms
2025-09-15 17:19:18.101 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:19:18.101 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 500 null application/json; charset=utf-8 491.2758ms
2025-09-15 17:19:26.484 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 61
2025-09-15 17:19:26.485 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:19:26.485 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:19:26.485 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:19:26.485 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:19:26.488 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:19:26.686 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:19:26.704 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:19:26.705 +07:00 [INF] User logged in: NghiaPham
2025-09-15 17:19:26.706 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:19:26.706 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 220.651ms
2025-09-15 17:19:26.706 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:19:26.706 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 221.585ms
2025-09-15 17:19:57.324 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/login - application/json 61
2025-09-15 17:19:57.324 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:19:57.325 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:19:57.329 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:19:57.330 +07:00 [WRN] Login failed: Username wrong_user not found
2025-09-15 17:19:57.330 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:19:57.331 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 5.9508ms
2025-09-15 17:19:57.331 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:19:57.331 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/login - 401 null application/json; charset=utf-8 7.0496ms
2025-09-15 17:20:44.144 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 100
2025-09-15 17:20:44.213 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:20:44.213 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:20:44.216 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:20:44.216 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 2.8425ms
2025-09-15 17:20:44.216 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:20:44.216 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 403 null application/json; charset=utf-8 72.8633ms
2025-09-15 17:21:26.752 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/logout - null 0
2025-09-15 17:21:26.752 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:21:26.752 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:21:26.762 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 17:21:26.768 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:21:26.768 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/logout - 401 0 null 16.3083ms
2025-09-15 17:22:40.875 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/api/User/profile - null null
2025-09-15 17:22:40.886 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 17:22:40.887 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:22:40.887 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/api/User/profile - 401 0 null 11.3172ms
2025-09-15 17:22:50.278 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/profile? - null null
2025-09-15 17:22:50.284 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/15/2025 10:01:44 AM', Current time (UTC): '9/15/2025 10:22:50 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-15 17:22:50.293 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/15/2025 10:01:44 AM', Current time (UTC): '9/15/2025 10:22:50 AM'.
2025-09-15 17:22:50.294 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 17:22:50.295 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:22:50.295 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/profile? - 401 0 null 17.5166ms
2025-09-15 17:23:06.734 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/profile? - null null
2025-09-15 17:23:06.745 +07:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-15 17:23:06.746 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-15 17:23:06.748 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 17:23:06.748 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:23:06.749 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/profile? - 401 0 null 15.2118ms
2025-09-15 17:23:24.745 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/profile? - null null
2025-09-15 17:23:24.746 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API)'
2025-09-15 17:23:24.754 +07:00 [INF] Route matched with {action = "GetProfile", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:23:24.766 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:23:24.863 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:23:24.863 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API) in 108.7183ms
2025-09-15 17:23:24.863 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetProfile (EVServiceCenter.API)'
2025-09-15 17:23:24.864 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/profile? - 200 null application/json; charset=utf-8 118.129ms
2025-09-15 17:23:33.380 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/profile/1 - null null
2025-09-15 17:23:33.382 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/profile/1 - 404 0 null 2.0578ms
2025-09-15 17:23:33.382 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/api/user/profile/1, Response status code: 404
2025-09-15 17:23:45.044 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/1 - null null
2025-09-15 17:23:45.046 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:23:45.051 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:23:45.057 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:23:45.059 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:23:45.060 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API) in 8.9249ms
2025-09-15 17:23:45.060 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:23:45.060 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/1 - 200 null application/json; charset=utf-8 16.2921ms
2025-09-15 17:23:50.153 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/2 - null null
2025-09-15 17:23:50.154 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:23:50.154 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:23:50.157 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:23:50.225 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:23:50.225 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API) in 71.032ms
2025-09-15 17:23:50.225 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:23:50.225 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/2 - 200 null application/json; charset=utf-8 72.4148ms
2025-09-15 17:23:53.893 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/2 - null null
2025-09-15 17:23:53.894 +07:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-15 17:23:53.894 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-15 17:23:53.894 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-15 17:23:53.894 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:23:53.895 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/2 - 401 0 null 1.5624ms
2025-09-15 17:23:58.719 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/2 - null null
2025-09-15 17:23:58.719 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:23:58.719 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:23:58.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:23:58.722 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:23:58.722 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API) in 2.6287ms
2025-09-15 17:23:58.722 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:23:58.722 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/2 - 200 null application/json; charset=utf-8 3.6934ms
2025-09-15 17:24:01.994 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/3 - null null
2025-09-15 17:24:01.995 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:24:01.995 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:24:01.998 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:24:01.999 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:24:02.000 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API) in 4.5924ms
2025-09-15 17:24:02.000 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:24:02.000 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/3 - 200 null application/json; charset=utf-8 5.7855ms
2025-09-15 17:24:05.800 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7077/api/user/4 - null null
2025-09-15 17:24:05.800 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:24:05.800 +07:00 [INF] Route matched with {action = "GetUserById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:24:05.802 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:24:05.803 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:24:05.804 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API) in 3.0861ms
2025-09-15 17:24:05.804 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.GetUserById (EVServiceCenter.API)'
2025-09-15 17:24:05.804 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7077/api/user/4 - 200 null application/json; charset=utf-8 3.8811ms
2025-09-15 17:24:55.883 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/13 - application/json 214
2025-09-15 17:24:55.884 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:24:55.884 +07:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, EVServiceCenter.Core.Domains.Identity.DTOs.Requests.UpdateUserRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:24:55.896 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:24:55.898 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:24:55.919 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:24:55.924 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:24:55.949 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:24:55.949 +07:00 [INF] User updated: 13 by system
2025-09-15 17:24:55.950 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:24:55.950 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API) in 65.5646ms
2025-09-15 17:24:55.950 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.UpdateUser (EVServiceCenter.API)'
2025-09-15 17:24:55.950 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/13 - 200 null application/json; charset=utf-8 67.05ms
2025-09-15 17:25:32.441 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/change-password - application/json 116
2025-09-15 17:25:32.509 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:25:32.509 +07:00 [INF] Route matched with {action = "ChangePassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.ChangePasswordRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:25:32.688 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:25:32.690 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:25:32.691 +07:00 [INF] Password updated for UserId 8
2025-09-15 17:25:32.691 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:25:32.691 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API) in 182.0251ms
2025-09-15 17:25:32.691 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:25:32.691 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/change-password - 200 null application/json; charset=utf-8 250.6279ms
2025-09-15 17:25:47.539 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 61
2025-09-15 17:25:47.540 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:25:47.540 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:25:47.540 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:25:47.540 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:25:47.579 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:25:47.802 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:25:47.860 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:25:47.860 +07:00 [INF] User logged in: NghiaPham
2025-09-15 17:25:47.862 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:25:47.862 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 322.0208ms
2025-09-15 17:25:47.863 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:25:47.863 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 323.6013ms
2025-09-15 17:26:34.369 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 57
2025-09-15 17:26:34.369 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:26:34.369 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:26:34.369 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:26:34.369 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:26:34.398 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:26:34.858 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [FailedLoginAttempts] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2025-09-15 17:26:34.858 +07:00 [WRN] Login failed: Invalid password for NghiaPham
2025-09-15 17:26:34.991 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:26:34.991 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 621.5087ms
2025-09-15 17:26:34.991 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:26:34.991 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 500 null application/json; charset=utf-8 622.3885ms
2025-09-15 17:26:38.984 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7077/api/user/change-password - application/json 111
2025-09-15 17:26:38.984 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:26:38.984 +07:00 [INF] Route matched with {action = "ChangePassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.ChangePasswordRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:26:39.181 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:26:39.198 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:26:39.198 +07:00 [INF] Password updated for UserId 8
2025-09-15 17:26:39.198 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:26:39.198 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API) in 214.4731ms
2025-09-15 17:26:39.199 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.ChangePassword (EVServiceCenter.API)'
2025-09-15 17:26:39.199 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7077/api/user/change-password - 200 null application/json; charset=utf-8 215.1458ms
2025-09-15 17:26:45.071 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 57
2025-09-15 17:26:45.072 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:26:45.072 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:26:45.072 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:26:45.072 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:26:45.075 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:26:45.371 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:26:45.382 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:26:45.383 +07:00 [INF] User logged in: NghiaPham
2025-09-15 17:26:45.383 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:26:45.383 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 311.379ms
2025-09-15 17:26:45.383 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:26:45.383 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 311.9645ms
2025-09-15 17:27:01.399 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7077/api/User/1 - null null
2025-09-15 17:27:01.399 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:27:01.400 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:27:01.401 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 17:27:01.401 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:27:01.401 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7077/api/User/1 - 401 0 null 2.5135ms
2025-09-15 17:27:24.629 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7077/api/User/1 - null null
2025-09-15 17:27:24.633 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:27:24.638 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:27:24.638 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 17:27:24.638 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:27:24.639 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7077/api/User/1 - 401 0 null 9.6217ms
2025-09-15 17:28:05.668 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7077/api/User/1 - null null
2025-09-15 17:28:05.669 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 17:28:05.669 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:28:05.669 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7077/api/User/1 - 401 0 null 0.6842ms
2025-09-15 17:28:32.639 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7077/api/user/register - application/json 100
2025-09-15 17:28:32.640 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:28:32.640 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:28:32.673 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 17:28:33.001 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (Size = 100), @p6='?' (DbType = Date), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Date), @p10='?' (Size = 64) (DbType = Binary), @p11='?' (Size = 32) (DbType = Binary), @p12='?' (Size = 20), @p13='?' (Size = 500), @p14='?' (Size = 8000) (DbType = Binary), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p18='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Department], [Email], [EmployeeCode], [FullName], [HireDate], [IsActive], [LastLoginDate], [PasswordExpiryDate], [PasswordHash], [PasswordSalt], [PhoneNumber], [ProfilePicture], [ResetToken], [ResetTokenExpiry], [RoleID], [Salary], [Username])
OUTPUT INSERTED.[UserID], INSERTED.[FailedLoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-15 17:28:33.001 +07:00 [INF] User registered: hacker
2025-09-15 17:28:33.002 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:28:33.003 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 362.8082ms
2025-09-15 17:28:33.003 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 17:28:33.003 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7077/api/user/register - 201 null application/json; charset=utf-8 370.2427ms
2025-09-15 17:28:49.423 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7077/api/User/1 - null null
2025-09-15 17:28:49.424 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 17:28:49.424 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:28:49.424 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7077/api/User/1 - 401 0 null 1.2072ms
2025-09-15 17:29:25.348 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7077/api/User/2 - null null
2025-09-15 17:29:25.349 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 17:29:25.349 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:29:25.349 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7077/api/User/2 - 401 0 null 25.2098ms
2025-09-15 17:29:32.279 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/login - application/json 57
2025-09-15 17:29:32.279 +07:00 [INF] CORS policy execution failed.
2025-09-15 17:29:32.279 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 17:29:32.315 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:29:32.315 +07:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.LoginRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:29:32.345 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Username] = @__username_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 17:29:32.728 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:29:32.765 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@p20='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 20), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Date), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Date), @p11='?' (Size = 64) (DbType = Binary), @p12='?' (Size = 32) (DbType = Binary), @p13='?' (Size = 20), @p14='?' (Size = 500), @p15='?' (Size = 8000) (DbType = Binary), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmployeeCode] = @p4, [FailedLoginAttempts] = @p5, [FullName] = @p6, [HireDate] = @p7, [IsActive] = @p8, [LastLoginDate] = @p9, [PasswordExpiryDate] = @p10, [PasswordHash] = @p11, [PasswordSalt] = @p12, [PhoneNumber] = @p13, [ProfilePicture] = @p14, [ResetToken] = @p15, [ResetTokenExpiry] = @p16, [RoleID] = @p17, [Salary] = @p18, [Username] = @p19
OUTPUT 1
WHERE [UserID] = @p20;
2025-09-15 17:29:32.765 +07:00 [INF] User logged in: NghiaPham
2025-09-15 17:29:32.765 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:29:32.766 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API) in 450.9036ms
2025-09-15 17:29:32.766 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Login (EVServiceCenter.API)'
2025-09-15 17:29:32.766 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/login - 200 null application/json; charset=utf-8 486.9918ms
2025-09-15 17:29:55.350 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7077/api/User/2 - null null
2025-09-15 17:29:55.351 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 17:29:55.351 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:29:55.351 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7077/api/User/2 - 401 0 null 1.3119ms
2025-09-15 17:30:25.983 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7077/api/User/1 - null null
2025-09-15 17:30:26.013 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.DeleteUser (EVServiceCenter.API)'
2025-09-15 17:30:26.019 +07:00 [INF] Route matched with {action = "DeleteUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(Int32) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:30:26.080 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-09-15 17:30:26.086 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:30:26.319 +07:00 [INF] Executed DbCommand (211ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [UserID] = @p0;
2025-09-15 17:30:26.327 +07:00 [INF] User deleted: 1
2025-09-15 17:30:26.328 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:30:26.328 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.DeleteUser (EVServiceCenter.API) in 308.3331ms
2025-09-15 17:30:26.328 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.DeleteUser (EVServiceCenter.API)'
2025-09-15 17:30:26.328 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7077/api/User/1 - 200 null application/json; charset=utf-8 378.2115ms
2025-09-15 17:30:43.483 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7077/api/User/1 - null null
2025-09-15 17:30:43.485 +07:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-15 17:30:43.485 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-15 17:30:43.485 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-15 17:30:43.485 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-15 17:30:43.485 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7077/api/User/1 - 401 0 null 2.2902ms
2025-09-15 17:31:06.046 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7077/api/User/7 - null null
2025-09-15 17:31:06.046 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.DeleteUser (EVServiceCenter.API)'
2025-09-15 17:31:06.047 +07:00 [INF] Route matched with {action = "DeleteUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(Int32) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 17:31:06.050 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-09-15 17:31:06.052 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[UserID] = @__id_0
2025-09-15 17:31:06.055 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [UserID] = @p0;
2025-09-15 17:31:06.055 +07:00 [INF] User deleted: 7
2025-09-15 17:31:06.055 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 17:31:06.056 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.DeleteUser (EVServiceCenter.API) in 8.9646ms
2025-09-15 17:31:06.056 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.DeleteUser (EVServiceCenter.API)'
2025-09-15 17:31:06.056 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7077/api/User/7 - 200 null application/json; charset=utf-8 10.0881ms
2025-09-15 23:10:03.839 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-15 23:10:03.868 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-15 23:10:03.894 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-15 23:10:03.949 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-15 23:10:03.956 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-15 23:10:03.957 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-15 23:10:03.966 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-15 23:10:03.973 +07:00 [INF] Applying migration '20250915160746_AddEmailVerificationFields'.
2025-09-15 23:10:04.186 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [EmailVerified] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-09-15 23:10:04.196 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [EmailVerificationToken] varbinary(max) NULL;
2025-09-15 23:10:04.198 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [EmailVerificationExpiry] datetime2 NULL;
2025-09-15 23:10:04.215 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250915160746_AddEmailVerificationFields', N'9.0.9');
2025-09-15 23:10:04.229 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-15 23:38:59.477 +07:00 [INF] User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-15 23:39:00.539 +07:00 [INF] Now listening on: https://localhost:7077
2025-09-15 23:39:00.541 +07:00 [INF] Now listening on: http://localhost:5153
2025-09-15 23:39:01.870 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 23:39:01.871 +07:00 [INF] Hosting environment: Development
2025-09-15 23:39:01.871 +07:00 [INF] Content root path: C:\Users\ADMIN\Desktop\SWP\BackEnd\EVServiceCenter\EVServiceCenter.API
2025-09-15 23:39:03.359 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/ - null null
2025-09-15 23:39:04.015 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/ - 404 0 null 670.7217ms
2025-09-15 23:39:04.022 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7077/, Response status code: 404
2025-09-15 23:39:08.107 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 23:39:08.107 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/_vs/browserLink - null null
2025-09-15 23:39:08.302 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 144.6521ms
2025-09-15 23:39:08.469 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/_vs/browserLink - 200 null text/javascript; charset=UTF-8 361.7954ms
2025-09-15 23:39:08.522 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - null null
2025-09-15 23:39:08.757 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 235.3718ms
2025-09-15 23:40:08.459 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/register - application/json 178
2025-09-15 23:40:08.480 +07:00 [INF] CORS policy execution failed.
2025-09-15 23:40:08.481 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 23:40:08.558 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 23:40:08.653 +07:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.RegisterRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 23:40:15.678 +07:00 [INF] Executed DbCommand (189ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__username_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 23:40:15.763 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-15 23:40:17.223 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (Size = 8000) (DbType = Binary), @p6='?' (DbType = Boolean), @p7='?' (Size = 20), @p8='?' (Size = 100), @p9='?' (DbType = Date), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Date), @p13='?' (Size = 64) (DbType = Binary), @p14='?' (Size = 32) (DbType = Binary), @p15='?' (Size = 20), @p16='?' (Size = 500), @p17='?' (Size = 8000) (DbType = Binary), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p21='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedBy], [CreatedDate], [Department], [Email], [EmailVerificationExpiry], [EmailVerificationToken], [EmailVerified], [EmployeeCode], [FullName], [HireDate], [IsActive], [LastLoginDate], [PasswordExpiryDate], [PasswordHash], [PasswordSalt], [PhoneNumber], [ProfilePicture], [ResetToken], [ResetTokenExpiry], [RoleID], [Salary], [Username])
OUTPUT INSERTED.[UserID], INSERTED.[FailedLoginAttempts]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-15 23:40:22.981 +07:00 [INF] Email sent successfully to nghiadaucau1@gmail.com with subject: Xác thực tài khoản EV Service Center
2025-09-15 23:40:22.983 +07:00 [INF] User registered: phamnhatnghia, verification email sent
2025-09-15 23:40:23.093 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType3`2[[EVServiceCenter.Core.Domains.Identity.DTOs.Responses.UserResponseDto, EVServiceCenter.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], EVServiceCenter.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 23:40:23.191 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API) in 14530.5596ms
2025-09-15 23:40:23.192 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.Register (EVServiceCenter.API)'
2025-09-15 23:40:23.208 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/register - 201 null application/json; charset=utf-8 14824.9549ms
2025-09-15 23:42:08.953 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/forgot-password - application/json 39
2025-09-15 23:42:08.957 +07:00 [INF] CORS policy execution failed.
2025-09-15 23:42:08.957 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 23:42:08.961 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.ForgotPassword (EVServiceCenter.API)'
2025-09-15 23:42:08.968 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.ForgotPasswordRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 23:42:09.463 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmailVerificationExpiry], [u].[EmailVerificationToken], [u].[EmailVerified], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Email] = @__email_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 23:42:09.602 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@p23='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (Size = 8000) (DbType = Binary), @p6='?' (DbType = Boolean), @p7='?' (Size = 20), @p8='?' (DbType = Int32), @p9='?' (Size = 100), @p10='?' (DbType = Date), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Date), @p14='?' (Size = 64) (DbType = Binary), @p15='?' (Size = 32) (DbType = Binary), @p16='?' (Size = 20), @p17='?' (Size = 500), @p18='?' (Size = 8000) (DbType = Binary), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p22='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmailVerificationExpiry] = @p4, [EmailVerificationToken] = @p5, [EmailVerified] = @p6, [EmployeeCode] = @p7, [FailedLoginAttempts] = @p8, [FullName] = @p9, [HireDate] = @p10, [IsActive] = @p11, [LastLoginDate] = @p12, [PasswordExpiryDate] = @p13, [PasswordHash] = @p14, [PasswordSalt] = @p15, [PhoneNumber] = @p16, [ProfilePicture] = @p17, [ResetToken] = @p18, [ResetTokenExpiry] = @p19, [RoleID] = @p20, [Salary] = @p21, [Username] = @p22
OUTPUT 1
WHERE [UserID] = @p23;
2025-09-15 23:42:15.310 +07:00 [INF] Email sent successfully to nghiadaucau1@gmail.com with subject: Đặt lại mật khẩu EV Service Center
2025-09-15 23:42:15.311 +07:00 [INF] Password reset token generated for user: nghiadaucau1@gmail.com
2025-09-15 23:42:15.313 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 23:42:15.318 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.ForgotPassword (EVServiceCenter.API) in 6349.9319ms
2025-09-15 23:42:15.318 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.ForgotPassword (EVServiceCenter.API)'
2025-09-15 23:42:15.319 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/forgot-password - 200 null application/json; charset=utf-8 6366.2905ms
2025-09-15 23:43:08.235 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7077/api/User/resend-verification - application/json 39
2025-09-15 23:43:08.236 +07:00 [INF] CORS policy execution failed.
2025-09-15 23:43:08.236 +07:00 [INF] Request origin https://localhost:7077 does not have permission to access the resource.
2025-09-15 23:43:08.247 +07:00 [INF] Executing endpoint 'EVServiceCenter.API.Controllers.UserController.ResendVerification (EVServiceCenter.API)'
2025-09-15 23:43:08.253 +07:00 [INF] Route matched with {action = "ResendVerification", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResendVerification(EVServiceCenter.Core.Domains.Identity.DTOs.Requests.ResendVerificationRequestDto) on controller EVServiceCenter.API.Controllers.UserController (EVServiceCenter.API).
2025-09-15 23:43:08.333 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedBy], [u].[CreatedDate], [u].[Department], [u].[Email], [u].[EmailVerificationExpiry], [u].[EmailVerificationToken], [u].[EmailVerified], [u].[EmployeeCode], [u].[FailedLoginAttempts], [u].[FullName], [u].[HireDate], [u].[IsActive], [u].[LastLoginDate], [u].[PasswordExpiryDate], [u].[PasswordHash], [u].[PasswordSalt], [u].[PhoneNumber], [u].[ProfilePicture], [u].[ResetToken], [u].[ResetTokenExpiry], [u].[RoleID], [u].[Salary], [u].[Username], [u0].[RoleID], [u0].[CreatedDate], [u0].[Description], [u0].[IsActive], [u0].[Permissions], [u0].[RoleName]
FROM [Users] AS [u]
INNER JOIN [UserRoles] AS [u0] ON [u].[RoleID] = [u0].[RoleID]
WHERE [u].[Email] = @__email_0 AND [u].[IsActive] = CAST(1 AS bit)
2025-09-15 23:43:08.357 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p23='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (Size = 8000) (DbType = Binary), @p6='?' (DbType = Boolean), @p7='?' (Size = 20), @p8='?' (DbType = Int32), @p9='?' (Size = 100), @p10='?' (DbType = Date), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Date), @p14='?' (Size = 64) (DbType = Binary), @p15='?' (Size = 32) (DbType = Binary), @p16='?' (Size = 20), @p17='?' (Size = 500), @p18='?' (Size = 8000) (DbType = Binary), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p22='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedBy] = @p0, [CreatedDate] = @p1, [Department] = @p2, [Email] = @p3, [EmailVerificationExpiry] = @p4, [EmailVerificationToken] = @p5, [EmailVerified] = @p6, [EmployeeCode] = @p7, [FailedLoginAttempts] = @p8, [FullName] = @p9, [HireDate] = @p10, [IsActive] = @p11, [LastLoginDate] = @p12, [PasswordExpiryDate] = @p13, [PasswordHash] = @p14, [PasswordSalt] = @p15, [PhoneNumber] = @p16, [ProfilePicture] = @p17, [ResetToken] = @p18, [ResetTokenExpiry] = @p19, [RoleID] = @p20, [Salary] = @p21, [Username] = @p22
OUTPUT 1
WHERE [UserID] = @p23;
2025-09-15 23:43:12.755 +07:00 [INF] Email sent successfully to nghiadaucau1@gmail.com with subject: Xác thực tài khoản EV Service Center
2025-09-15 23:43:12.757 +07:00 [INF] Verification email resent for user: nghiadaucau1@gmail.com
2025-09-15 23:43:12.757 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 23:43:12.758 +07:00 [INF] Executed action EVServiceCenter.API.Controllers.UserController.ResendVerification (EVServiceCenter.API) in 4504.4726ms
2025-09-15 23:43:12.758 +07:00 [INF] Executed endpoint 'EVServiceCenter.API.Controllers.UserController.ResendVerification (EVServiceCenter.API)'
2025-09-15 23:43:12.758 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7077/api/User/resend-verification - 200 null application/json; charset=utf-8 4523.1936ms
