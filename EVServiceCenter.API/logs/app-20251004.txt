[2025-10-04 08:01:18.863 +07:00 INF] Now listening on: https://localhost:7077 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:01:18.901 +07:00 INF] Now listening on: http://localhost:5153 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:01:18.953 +07:00 INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:01:18.961 +07:00 INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:01:18.965 +07:00 INF] Content root path: C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:01:19.651 +07:00 INF] Request: GET / {"SourceContext":"Program","RequestId":"0HNG2S63I3RLB:00000001","RequestPath":"/","ConnectionId":"0HNG2S63I3RLB"}
[2025-10-04 08:15:07.688 +07:00 INF] Now listening on: https://localhost:7077 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:15:07.731 +07:00 INF] Now listening on: http://localhost:5153 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:15:07.788 +07:00 INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:15:07.797 +07:00 INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:15:07.800 +07:00 INF] Content root path: C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:15:09.585 +07:00 INF] Request: GET / {"SourceContext":"Program","RequestId":"0HNG2SDQGGQL9:00000001","RequestPath":"/","ConnectionId":"0HNG2SDQGGQL9"}
[2025-10-04 08:50:00.634 +07:00 INF] Now listening on: https://localhost:7077 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:50:00.700 +07:00 INF] Now listening on: http://localhost:5153 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:50:00.771 +07:00 INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:50:00.781 +07:00 INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:50:00.793 +07:00 INF] Content root path: C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API {"SourceContext":"Microsoft.Hosting.Lifetime"}
[2025-10-04 08:50:01.149 +07:00 INF] Request: GET / {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000001","RequestPath":"/","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 08:50:49.050 +07:00 INF] Request: POST /api/auth/login {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 08:50:50.310 +07:00 INF] User nghiadaucau1@gmail.com (ID: 2067, Role: "Customer") logged in successfully from IP: 127.0.0.1, UserAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0 {"SourceContext":"EVServiceCenter.Infrastructure.Domains.Identity.Services.UserService","ActionId":"b58a3126-600f-488b-9dcc-a9302180675e","ActionName":"EVServiceCenter.API.Controllers.Auth.AuthController.Login (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:02:03.438 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000000B","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:02:22.277 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000000D","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:02:22.733 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000000D","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:02:22.818 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000000D","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:02:22.970 +07:00 INF] Customer 1014 created appointment APT202510047755 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000000D","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:12.010 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000000F","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:12.093 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000000F","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:12.116 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000000F","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:12.150 +07:00 INF] Customer 1014 created appointment APT202510049649 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000000F","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:34.187 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000011","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:34.267 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000011","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:34.281 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000011","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:34.305 +07:00 INF] Customer 1014 created appointment APT202510042463 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000011","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:37.919 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000013","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:03:38.123 +07:00 WRN] Invalid appointment creation attempt by customer 1014 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000013","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Slot đã đầy
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CreateAsync(CreateAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 59
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment(CreateAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 70
[2025-10-04 09:04:04.649 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000015","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:04.754 +07:00 WRN] Invalid appointment creation attempt by customer 1014 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000015","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Slot đã đầy
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CreateAsync(CreateAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 59
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment(CreateAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 70
[2025-10-04 09:04:08.369 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000017","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:08.446 +07:00 WRN] Invalid appointment creation attempt by customer 1014 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000017","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Slot đã đầy
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CreateAsync(CreateAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 59
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment(CreateAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 70
[2025-10-04 09:04:31.480 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000019","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:31.528 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000019","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:31.553 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000019","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:31.597 +07:00 INF] Customer 1014 created appointment APT202510044739 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000019","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:35.443 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000001B","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:35.469 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000001B","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:35.490 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000001B","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:35.510 +07:00 INF] Customer 1014 created appointment APT202510041456 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000001B","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:42.829 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000001D","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:42.913 +07:00 WRN] Invalid appointment creation attempt by customer 1014 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000001D","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Slot đã đầy
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CreateAsync(CreateAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 59
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment(CreateAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 70
[2025-10-04 09:04:51.972 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000001F","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:52.045 +07:00 WRN] Invalid appointment creation attempt by customer 1014 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000001F","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Slot đã đầy
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CreateAsync(CreateAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 59
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment(CreateAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 70
[2025-10-04 09:04:55.063 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000021","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:04:55.164 +07:00 WRN] Invalid appointment creation attempt by customer 1014 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000021","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Slot đã đầy
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CreateAsync(CreateAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 59
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment(CreateAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 70
[2025-10-04 09:05:13.862 +07:00 INF] Request: POST /api/appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000023","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:05:13.927 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000023","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:05:13.953 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000023","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:05:13.995 +07:00 INF] Customer 1014 created appointment APT202510043275 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b220ee60-e134-49b9-85ab-4fd1dc91ffff","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CreateAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000023","RequestPath":"/api/appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:07:17.338 +07:00 INF] Request: GET /api/appointments/my-appointments {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000025","RequestPath":"/api/appointments/my-appointments","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:08:51.942 +07:00 INF] Request: DELETE /api/appointments/7 {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000027","RequestPath":"/api/appointments/7","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:08:52.070 +07:00 INF] Customer 1014 deleted appointment 7 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b5e0c6ef-b58c-432d-b256-62845f4ebdc3","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.DeleteAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000027","RequestPath":"/api/appointments/7","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:10:38.610 +07:00 INF] Request: POST /api/appointments/4/cancel {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000029","RequestPath":"/api/appointments/4/cancel","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:10:38.782 +07:00 INF] Customer 1014 cancelled appointment 4. Reason: Anh không thích  {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"9db1dddb-a283-4db0-add6-059c77be69e8","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CancelAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000029","RequestPath":"/api/appointments/4/cancel","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:12:29.868 +07:00 INF] Request: POST /api/appointments/4/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000002B","RequestPath":"/api/appointments/4/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:12:30.057 +07:00 WRN] Invalid reschedule attempt for appointment 4 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000002B","RequestPath":"/api/appointments/4/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Không thể dời lịch appointment đã kết thúc
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.RescheduleAsync(RescheduleAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 193
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment(Int32 id, RescheduleAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 391
[2025-10-04 09:12:56.381 +07:00 INF] Request: POST /api/appointments/1/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000002D","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:12:56.474 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000002D","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:12:56.495 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000002D","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:12:56.507 +07:00 INF] Customer 1014 rescheduled appointment 1 to new appointment 8 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000002D","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:14:42.764 +07:00 INF] Request: POST /api/appointments/1/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000002F","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:14:42.999 +07:00 WRN] Invalid reschedule attempt for appointment 1 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000002F","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Không thể dời lịch appointment đã kết thúc
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.RescheduleAsync(RescheduleAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 193
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment(Int32 id, RescheduleAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 391
[2025-10-04 09:15:13.888 +07:00 INF] Request: POST /api/appointments/1/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000031","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:15:13.990 +07:00 WRN] Invalid reschedule attempt for appointment 1 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000031","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Không thể dời lịch appointment đã kết thúc
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.RescheduleAsync(RescheduleAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 193
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment(Int32 id, RescheduleAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 391
[2025-10-04 09:15:22.668 +07:00 INF] Request: POST /api/appointments/1/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000033","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:15:22.741 +07:00 WRN] Invalid reschedule attempt for appointment 1 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000033","RequestPath":"/api/appointments/1/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Không thể dời lịch appointment đã kết thúc
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.RescheduleAsync(RescheduleAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 193
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment(Int32 id, RescheduleAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 391
[2025-10-04 09:15:46.250 +07:00 INF] Request: POST /api/appointments/3/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000035","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:15:46.324 +07:00 WRN] Invalid reschedule attempt for appointment 3 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000035","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Slot mới đã đầy
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.RescheduleAsync(RescheduleAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 203
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment(Int32 id, RescheduleAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 391
[2025-10-04 09:15:59.333 +07:00 INF] Request: POST /api/appointments/3/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000037","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:15:59.421 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000037","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:15:59.441 +07:00 WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'. {"EventId":{"Id":30004,"Name":"Microsoft.EntityFrameworkCore.Database.Transaction.SavepointsDisabledBecauseOfMARS"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Transaction","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000037","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:15:59.456 +07:00 INF] Customer 1014 rescheduled appointment 3 to new appointment 9 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000037","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:16:16.333 +07:00 INF] Request: POST /api/appointments/3/reschedule {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:00000039","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:16:16.410 +07:00 WRN] Invalid reschedule attempt for appointment 3 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"b956994f-81ba-4e78-ac37-c75182b7b293","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:00000039","RequestPath":"/api/appointments/3/reschedule","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Không thể dời lịch appointment đã kết thúc
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.RescheduleAsync(RescheduleAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 193
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.RescheduleAppointment(Int32 id, RescheduleAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 391
[2025-10-04 09:17:26.323 +07:00 INF] Request: POST /api/appointments/1/cancel {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000003B","RequestPath":"/api/appointments/1/cancel","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:17:26.447 +07:00 WRN] Invalid cancel attempt for appointment 1 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"9db1dddb-a283-4db0-add6-059c77be69e8","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CancelAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000003B","RequestPath":"/api/appointments/1/cancel","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Không thể hủy appointment đã kết thúc
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CancelAsync(CancelAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 260
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CancelAppointment(Int32 id, CancelAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 465
[2025-10-04 09:17:31.046 +07:00 INF] Request: POST /api/appointments/1/cancel {"SourceContext":"Program","RequestId":"0HNG2T1A7OVS0:0000003D","RequestPath":"/api/appointments/1/cancel","ConnectionId":"0HNG2T1A7OVS0"}
[2025-10-04 09:17:31.120 +07:00 WRN] Invalid cancel attempt for appointment 1 {"SourceContext":"EVServiceCenter.API.Controllers.Appointments.AppointmentController","ActionId":"9db1dddb-a283-4db0-add6-059c77be69e8","ActionName":"EVServiceCenter.API.Controllers.Appointments.AppointmentController.CancelAppointment (EVServiceCenter.API)","RequestId":"0HNG2T1A7OVS0:0000003D","RequestPath":"/api/appointments/1/cancel","ConnectionId":"0HNG2T1A7OVS0"}
System.InvalidOperationException: Không thể hủy appointment đã kết thúc
   at EVServiceCenter.Infrastructure.Domains.AppointmentManagement.Services.AppointmentCommandService.CancelAsync(CancelAppointmentRequestDto request, Int32 currentUserId, CancellationToken cancellationToken) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.Infrastructure\Domains\AppointmentManagement\Services\AppointmentCommandService.cs:line 260
   at EVServiceCenter.API.Controllers.Appointments.AppointmentController.CancelAppointment(Int32 id, CancelAppointmentRequestDto request) in C:\Users\ADMIN\Desktop\EVServiceCenter-BackupV2-Done-main\EVServiceCenter-BackupV2-Done-main\EVServiceCenter.API\Controllers\Appointments\AppointmentController.cs:line 465
